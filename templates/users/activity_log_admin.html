{% extends 'base.html' %}
{% block title %}Journal d'Activité - Bijouterie Hafsa ERP{% endblock %}
{% block breadcrumb %}<span>/</span><a href="{% url 'users:activity_log_admin' %}">Journal Activité</a>{% endblock %}
{% block page_header %}<div><h1 class="text-3xl font-bold text-gray-900">Journal d'Activité Complet</h1><p class="text-gray-600 mt-1">Tous les événements du système</p></div>{% endblock %}
{% block content %}<!-- Statistics --><div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-8"><div class="bg-white rounded-lg shadow-md p-4"><p class="text-gray-600 text-sm font-medium">Total Événements</p><p class="text-2xl font-bold text-gray-900">{{ stats.total }}</p></div><div class="bg-white rounded-lg shadow-md p-4"><p class="text-gray-600 text-sm font-medium">Aujourd'hui</p><p class="text-2xl font-bold text-blue-600">{{ stats.today }}</p></div></div><!-- Filters --><div class="bg-white rounded-lg shadow-md p-6 mb-6"><form method="get" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4"><div><input type="text" name="search" value="{{ search }}" placeholder="Utilisateur ou action" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"></div><div><select name="action" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"><option value="">Toutes les actions</option>{% for value, label in action_choices %}<option value="{{ value }}" {% if action == value %}selected{% endif %}>{{ label }}</option>{% endfor %}</select></div><div><input type="date" name="date_from" value="{{ date_from }}" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"></div><button type="submit" class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700"><i class="fas fa-search mr-2"></i> Chercher</button></form></div><!-- Table --><div class="bg-white rounded-lg shadow-md overflow-hidden"><div class="overflow-x-auto"><table class="w-full text-sm"><thead class="bg-gray-50 border-b"><tr><th class="px-6 py-3 text-left font-medium text-gray-700">Date/Heure</th><th class="px-6 py-3 text-left font-medium text-gray-700">Utilisateur</th><th class="px-6 py-3 text-left font-medium text-gray-700">Action</th><th class="px-6 py-3 text-left font-medium text-gray-700">Description</th></tr></thead><tbody class="divide-y divide-gray-200">{% for log in logs %}<tr class="hover:bg-gray-50"><td class="px-6 py-3 text-gray-600 text-xs">{{ log.created_at|date:"d/m/Y H:i:s" }}</td><td class="px-6 py-3">{{ log.user.get_full_name }}</td><td class="px-6 py-3"><span class="inline-block px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800">{{ log.get_action_display }}</span></td><td class="px-6 py-3 text-gray-700">{{ log.object_repr }}</td></tr>{% empty %}<tr><td colspan="4" class="px-6 py-8 text-center text-gray-500">Aucun événement trouvé</td></tr>{% endfor %}</tbody></table></div></div>{% endblock %}
